<!DOCTYPE html>
<html>
  <head>
    
    <meta charset="UTF-8">
    <meta name="keywords" content="HTML, CSS">
    <meta name="description" content="CheckPoint">
    <meta name="author" content="Juan Ullua y Matias Vargados">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/kimeiga/bahunya@css/bahunya-0.1.3.css" />
    <link rel="stylesheet" href="/frontend/pantallas-admin/css/style.css"/>

    <title>CheckPoint</title>

  </head>
  <body>
    <!-- menÃº principal -->
    <header>
        <ul id="listado-nav">
          <li class="links-header"><a href="admin.html"><span>Inicio</span></a></li>
          <li class="links-header"><a href="get.html"><span>ID</span></a></li>
          <li class="links-header"><a href="post.html"><span>Post</span></a></li>
          <li class="links-header"><a href="put.html"><span>Put</span></a></li>
          <li class="links-header"><a href="delete.html"><span>Delete</span></a></li>
        </ul>
    </header>

    <hr>
    <h1 class="titulo">Listado de productos</h1>
    <hr>

    <!-- lista de productos con botones -->
    <main id="contenedor-get">

      <div id="productos-container">
        <ul id="productos-lista">
          <!--
            <li class="li-listados productos-listados">
              <img src="" alt="" class="img-listados">
              <p>Id: / Nombre: / <strong>Precio: </strong></p>
            </li>
          -->
        </ul>
      </div>

    </main>

    <script>

        fetch(`http://localhost:3000/productos`) // Realizamos un HTTP del get a la url
          .then(respuesta => respuesta.json()) // Convertimos la respuesta en un objeto js
          .then(data => {
            console.log(data);
            mostrarProductos(data);
          })
          .catch(error => console.error("ERROR", error));
          
        
        function mostrarProductos(array){

          let listaProductos = array.payload; // el paiload es para llamar a un conjunto de datos
          console.table(listaProductos);

          let productos_lista = document.getElementById("productos-lista");
          let htmlProductos = "";

          listaProductos.forEach(producto => {
            htmlProductos += `
            <li class="li-listados productos-listados">
              <img src="${producto.imagen}" alt="${producto.nombre}" class="img-listados">
              <p>Id: ${producto.id} / Nombre: ${producto.nombre}/ <strong>Precio: $  ${producto.precio}</strong></p>
            </li>
            `;
          });

          productos_lista.innerHTML = htmlProductos;
        }
    </script>
</body>
</html>